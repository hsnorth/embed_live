<!-- Include in your <head> if not already present -->
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Roboto Bold -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&display=swap" rel="stylesheet">

<style>
  .tip-embed {
    position: relative;
    border: 1px solid #ccc;
    border-radius: 12px;
    padding: 1rem;
    max-width: 500px;
    width: 100%;
    margin: 1rem auto;
    font-family: sans-serif;
    box-sizing: border-box;
  }
  .tip-embed img.tip-logo {
    position: absolute;
    top: 1rem;
    right: 1rem;
    width: 3.5rem;
    height: auto;
  }
  .tip-embed h3 {
    font-family: 'Roboto', sans-serif;
    font-weight: 700;
    /* fluid between 1.5rem and 2rem based on viewport */
    font-size: clamp(1.5rem, 6vw, 2rem);
    text-align: center;
    margin: 0 0 .5rem;
  }
  .tip-embed p {
    font-family: 'Roboto', sans-serif;
    font-weight: 700;
    /* fluid between 1rem and 1.2rem */
    font-size: clamp(1rem, 4vw, 1.2rem);
    text-align: center;
    color: #555;
    margin: 0 0 1rem;
  }
  .tip-embed textarea {
    width: 100%;
    padding: .5rem;
    border: 1px solid #ccc;
    border-radius: 4px;
    resize: vertical;
    margin-bottom: .75rem;
    box-sizing: border-box;
    font-family: inherit;
    font-size: 1rem;
  }
  .tip-embed button {
    width: 100%;
    padding: .75rem;
    background: #000;
    color: #fff;
    border: none;
    border-radius: 4px;
    font-size: 1rem;
    cursor: pointer;
  }
  .tip-embed #form-status {
    margin-top: .75rem;
    font-size: .9rem;
  }
  /* Extra small phones */
  @media (max-width: 360px) {
    .tip-embed {
      padding: .75rem;
    }
    .tip-embed img.tip-logo {
      width: 2.5rem;
      top: .75rem;
      right: .75rem;
    }
    .tip-embed textarea {
      margin-bottom: .5rem;
    }
  }
</style>

<div class="tip-embed">
  <img src="gazettelogo.png" alt="The Gazette logo" class="tip-logo">

  <h3>Got a tip?</h3>
  <p>Share any information with us about this story</p>

  <form id="tip-form" action="https://formspree.io/f/xkgbvzbl" method="POST">
    <input type="text" name="_gotcha" style="display:none;">

    <textarea
      name="info"
      id="info"
      rows="1"
      placeholder="Your name, contact info & tip…"
      required
    ></textarea>

    <button type="submit">Send</button>
    <div id="form-status"></div>
  </form>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var form = document.getElementById('tip-form');
    var status = document.getElementById('form-status');

    form.addEventListener('submit', function(ev) {
      ev.preventDefault();
      status.style.color = '';
      status.textContent = 'Sending…';

      var data = new FormData(form);
      fetch(form.action, {
        method: 'POST',
        body: data,
        headers: { 'Accept': 'application/json' }
      })
      .then(function(response) {
        if (response.ok) {
          form.reset();
          status.style.color = 'green';
          status.textContent = 'Thanks! Your tip is on its way.';
        } else {
          response.json().then(function(data) {
            status.style.color = 'red';
            var errors = data.errors || [];
            status.textContent = errors.map(function(err) { return err.message; }).join(', ')
                               || 'Oops! There was a problem.';
          });
        }
      })
      .catch(function() {
        status.style.color = 'red';
        status.textContent = 'Network error. Please try again.';
      });
    });
  });
</script>
